name: Download and Unzip Angular Build

on:
  push:
      branches:
        - main
  workflow_dispatch:
  release:
      types: [published]
jobs:
  unzip-build:
    runs-on: self-hosted

    steps:
      # 1Ô∏è‚É£ Checkout repo
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2Ô∏è‚É£ Download latest release asset
      - name: Download latest Angular build
        uses: robinraju/release-downloader@v1.11
        with:
          repository: ${{ github.repository }}
          latest: true
          fileName: angular-build.zip  # make sure this matches your release asset
          token: ${{ secrets.GITHUB_TOKEN }}

      # 3Ô∏è‚É£ Install unzip (if not installed)
      - name: Install unzip
        run: |
          sudo apt update -y
          sudo apt install -y unzip

      # 4Ô∏è‚É£ Unzip the build
      - name: Unzip Angular build
        run: |
          echo "üì¶ Unzipping angular-build.zip..."
          unzip -o angular-build.zip -d ./angular-build
          echo "‚úÖ Angular build unzipped to ./angular-build"
          ls -l ./angular-build
